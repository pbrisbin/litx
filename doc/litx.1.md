% LITX(1) User Manual
%
% November 2022

# NAME

litx - execute Literate Markdown programs

# SYNOPSIS

*litx* \[options]

# OPTIONS

**\-i**, **\--input** *\<PATH|->*\

> Read Markdown from *PATH* (default: *-*)

## Language Presets

If not specified (see below), LitX uses the most common supported language
across all code-blocks in the source document. If there are none, LitX will be a
complicated no-op (an empty file executed with *cat*).

**\--bash**

> Equivalent to:
>
> **\--filter-tag**=*\"bash\"*\
> **\--shebang**=*\"/usr/bin/env bash\"*\
> **\--preamble**=*\"set -euo pipefail\"*\
> **\--comment-chars**=*\"#\"*\
> **\--exec**=*\"bash\"*\
> **\--arg**=*\"-s\"*\
> **\--arg**=*\"-\"*

Additional languages coming soon.

## Rendering Options

**\--filter-tag** *\<TEXT\>*\

> Filter to code-blocks with the given tag.

**\--shebang** *\<TEXT>*\

> Set the shebang, without the leading *#!*.

**\--no-banner**\

> Disable the default banner.

**\--banner** *\<TEXT>*\

> Set the banner included in the top of the script. Default is a commented
> block such as,
>
> ```
> #
> # Generated by litx-vX.X.X.X
> #
> ```

**\--no-preamble**\

> Disable any default preamble.

**\--preamble** *\<TEXT>*\

> Set the preamble. Default is language-specific.

**\--comment-chars** *\<TEXT>*\

> Set the characters used to prefix line comments.

## Execution Options

**\--exec** *\<COMMAND>*\

> Set the command to use to execute the script. Default is language-specific.
> Passing this option will clear any arguments.
>
> For example,
>
> ```
> --bash
> ```
>
> will invoke
>
> ```
> bash -s -
> ```
>
> but
>
> ```
> --bash --exec my-bash
> ```
>
> will only invoke
>
> ```
> my-bash
> ```
>
> You will need to pass
>
> ```
> --exec my-bash --arg -s --arg -
> ```
>
> to achieve what (probably) you want.
>
> **NOTE**: The script is always passed to the command as its *stdin*.

**\--arg** *\<ARG>*\

> Pass an additional argument during execution. Can be specified many times.
>
> This will append to any language-specific arguments. To avoid this, you can
> re-specify the default *\--exec* first.

**\--no-env**\

> Don't inherit the current process's environment in the executed process.

**\--interactive**\

> Execute the document interactively. Each code-block is shown and the user is
> prompted to execute or skip.

# PRAGMAS

LitX reads directives from HTML comment in the source documents. There are
currently two such pragmas,

```
<!-- litx [option...] -->
```

The first such comment, if found, will set options for this `litx` invocation;
any others will be ignored. Pragma options are applied after inferred options
but before command-line options.

```
<!-- litx-ignore-next -->
```

Omit the next code-block from execution.

Usage: litx [-i|--input PATH|-] [--bash] [--python] [--filter-tag TEXT] 
            [--shebang TEXT] [--no-banner] [--banner TEXT] [--no-preamble] 
            [--preamble TEXT] [--comment-chars TEXT] [--exec CMD] [--arg ARG] 
            [--no-env]
  Execute Literate Markdown programs

Available options:
  -i,--input PATH|-        Read Markdown from PATH (default: -)
  --bash                   Parse and execute bash code-blocks
  --python                 Parse and execute python code-blocks
  --filter-tag TEXT        Filter to code-blocks of the given tag
  --shebang TEXT           Set the shebang (without '#!')
  --no-banner              Disable any 'Generated by...' banner
  --banner TEXT            Set the banner
  --no-preamble            Disable any preamble
  --preamble TEXT          Set the preamble
  --comment-chars TEXT     Set the characters used for line comments
  --exec CMD               Execute script using CMD
  --arg ARG                Pass additional arguments when executing
  --no-env                 Don't inherit ENV in the executed process
  -h,--help                Show this help text

See litx(1) for more details.
## Options

The first comment that begins with the word *litx*, if present, will be parsed
for command-line flags:

```
<!-- litx --bash -->

<!-- litx
     --bash
     --arg="--foo bar"
     --no-env
-->
```

These options are applied after the inferred language preset, but before any
other command-line options (including an explicit language preset). *All* words
will be considered options, so ensure there is not extra content in the comment.

# AUTHOR

Patrick Brisbin <pbrisbin@gmail.com>
